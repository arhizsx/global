$(document).on("shown.bs.modal","#modal",function(){var n=$(document).find("#modal").find(".signature");n.signature({background:"#fdd700",color:"#000000",thickness:3}),n.signature({syncField:"#signatureJSON"})});$(document).on("change",".field_monitor",function(){console.log(this.value),console.log($(this).attr("name")),console.log($(this).data()),console.log($(this).closest("form.ajax_form").attr("id")),$(this);var n=$(this).closest("form.ajax_form").attr("id"),e=$(this).attr("name"),a=$(this).val(),o=$(this).data();e=="country"&&(a=="PH"?($(this).closest(".row").find("[name='region']").parent().removeClass("d-none"),$(this).closest(".row").find("[name='province']").parent().removeClass("d-none")):($(this).closest(".row").find("[name='region']").parent().addClass("d-none"),$(this).closest(".row").find("[name='province']").parent().addClass("d-none")));var t="field_monitor",i=r({action:t,form_id:n,field_name:e,field_value:a,field_data:o});$.when(i).done(function(){console.log("Ajax Action Done")})});$(document).on("change",".field_monitor_multi",function(){console.log(this.value),console.log($(this).attr("name")),console.log($(this).data()),console.log($(this).closest("form.ajax_form").attr("id")),$(this);var n=$(this).closest("form.ajax_form").attr("id"),e=$(this).attr("name"),a=$(this).val(),o=$(this).attr("data-fieldgroup_id"),t=$(this).attr("data-fieldgroup_name");e=="country"&&(a=="PH"?($(this).closest(".row").find("[name='region']").parent().removeClass("d-none"),$(this).closest(".row").find("[name='province']").parent().removeClass("d-none")):($(this).closest(".row").find("[name='region']").parent().addClass("d-none"),$(this).closest(".row").find("[name='province']").parent().addClass("d-none")));var i="field_monitor_multi",d=r({action:i,form_id:n,field_name:e,field_value:a,field_group_id:o,field_group:t});$.when(d).done(function(){console.log("Ajax Action Done")})});$(document).on("click",".ajax_btn",function(n){n.preventDefault();var e=$(this),a=e.data();switch(console.log(e),console.log(a),$(this).data("action")){case"affix-signature":$(document).find("#modal").modal("show"),$(document).find("#modal").find(".ajax_btn[data-action='set-signature']").attr("data-signbox",e.data("signbox"));break;case"clear-signature":e.parent().find(".signature").signature("clear");break;case"set-signature":var o=$(this).attr("data-signbox");console.log(o);var t=$(document).find("#modal").find(".signature").find("canvas").width(),i=$(document).find("#modal").find(".signature").find("canvas").height(),d=e.parent().parent().find("#signatureJSON").val(),s=$(document).find(".signature[data-signbox='"+o+"']"),l=$(document).find(".signature_box[data-signbox='"+o+"']"),c=$(document).find(".field_monitor_multi[data-signbox='"+o+"']");c.text(d).change(),l.removeClass("d-none"),s.css("width",t),s.css("height",i),s.signature({background:"#fdd700",color:"#000000",thickness:3}),s.signature("enable").signature("draw",d).signature("disable"),$(document).find("#modal").modal("hide");break;default:r(a)}});function r(n,e){var a=new $.Deferred;return $.ajax({url:"/ajax",method:"POST",data:n,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){},success:function(o){a.resolve(o)},complete:function(){},error:function(){a.fail("Error in Ajax Call")}}),a.promise()}
